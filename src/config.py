"""Config# –î–µ–±–∞–≥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Environment Variables
print("üîß DEBUG: Checking environment variables...")
print(f"üîë DEBUG: TELEGRAM_BOT_TOKEN = {os.environ.get('TELEGRAM_BOT_TOKEN', 'NOT_SET')[:20]}...")
print(f"üîë DEBUG: GEMINI_API_KEY = {os.environ.get('GEMINI_API_KEY', 'NOT_SET')[:20]}...")
print(f"üîë DEBUG: ELEVENLABS_API_KEY = {os.environ.get('ELEVENLABS_API_KEY', 'NOT_SET')[:20]}...")
print(f"üîë DEBUG: OPENAI_API_KEY = {os.environ.get('OPENAI_API_KEY', 'NOT_SET')[:20]}...")settings for the Telegram Video Analyzer Bot."""

import os
from pathlib import Path
from dotenv import load_dotenv

# Load environment variables
load_dotenv()

# –î–µ–±–∞–≥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Environment Variables
print("üîß DEBUG: Checking environment variables...")
print(f"üîë DEBUG: TELEGRAM_BOT_TOKEN = {os.environ.get('TELEGRAM_BOT_TOKEN', 'NOT_SET')[:20]}...")
print(f"üîë DEBUG: GEMINI_API_KEY = {os.environ.get('GEMINI_API_KEY', 'NOT_SET')[:20]}...")
print(f"üîë DEBUG: ELEVENLABS_API_KEY = {os.environ.get('ELEVENLABS_API_KEY', 'NOT_SET')[:20]}...")
print(f"üîë DEBUG: OPENAI_API_KEY = {os.environ.get('OPENAI_API_KEY', 'NOT_SET')[:20]}...")

class Config:
    """Application configuration class."""
    
    # Telegram Bot Configuration
    TELEGRAM_BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
    
    # Gemini AI Configuration
    GEMINI_API_KEY = os.getenv('GEMINI_API_KEY')
    
    # OpenAI Configuration
    OPENAI_API_KEY = os.getenv('OPENAI_API_KEY')
    
    # ElevenLabs Configuration
    ELEVENLABS_API_KEY = os.getenv('ELEVENLABS_API_KEY')
    
    # Language Support Configuration
    SUPPORTED_LANGUAGES = {
        'ru': {
            'name': 'üá∑üá∫ –†—É—Å—Å–∫–∏–π',
            'gemini_prompt_lang': '—Ä—É—Å—Å–∫–æ–º',
            'gpt_prompt_lang': '—Ä—É—Å—Å–∫–æ–º',
            'elevenlabs_voice_id': '1REYVgkHGlaFX4Rz9cPZ',  # Vasiliy
            'elevenlabs_voice_name': 'Vasiliy'
        },
        'en': {
            'name': 'üá∫üá∏ English',
            'gemini_prompt_lang': 'English',
            'gpt_prompt_lang': 'English',
            'elevenlabs_voice_id': 'EXAVITQu4vr4xnSDxMaL',  # Sarah
            'elevenlabs_voice_name': 'Sarah'
        },
        'es': {
            'name': 'üá™üá∏ Espa√±ol',
            'gemini_prompt_lang': 'Spanish',
            'gpt_prompt_lang': 'Spanish',
            'elevenlabs_voice_id': 'XrExE9yKIg1WjnnlVkGX',  # Mateo
            'elevenlabs_voice_name': 'Mateo'
        }
    }
    
    DEFAULT_LANGUAGE = 'ru'
    
        # Video Processing Configuration
    MAX_VIDEO_SIZE_MB = 20
    FRAME_INTERVAL_SECONDS = float(os.getenv('FRAME_INTERVAL_SECONDS', 5.0))
    MAX_FRAMES_PER_VIDEO = int(os.getenv('MAX_FRAMES_PER_VIDEO', 100))
    
    # Logging Configuration
    LOG_LEVEL = os.getenv('LOG_LEVEL', 'INFO')
    
    # File Storage Configuration
    BASE_DIR = Path(__file__).parent
    TEMP_DIR = Path(os.getenv('TEMP_DIR', BASE_DIR / 'temp'))
    LOGS_DIR = Path(os.getenv('LOGS_DIR', BASE_DIR / 'logs'))
    
    # Create directories if they don't exist
    TEMP_DIR.mkdir(exist_ok=True)
    LOGS_DIR.mkdir(exist_ok=True)
    
    # Gemini Configuration
    GEMINI_MODEL = "gemini-2.5-flash"
    GEMINI_VISION_MODEL = "gemini-2.5-flash"
    
    # Language-specific prompts
    VIDEO_ANALYSIS_PROMPTS = {
        'ru': """
        –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ —ç—Ç–æ–º –≤–∏–¥–µ–æ –ü–û–õ–ù–û–°–¢–¨–Æ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞. –¢–µ–±–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–¥—Ä—ã –∏–∑ –í–°–ï–ì–û –≤–∏–¥–µ–æ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 5 —Å–µ–∫—É–Ω–¥. 
        
        –í–ê–ñ–ù–û: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –í–°–Å –í–ò–î–ï–û –¶–ï–õ–ò–ö–û–ú, –≤–∫–ª—é—á–∞—è —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –∫–∞–¥—Ä—ã –∏ –∫–æ–Ω—Ü–æ–≤–∫—É.
        
        –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:
        üé¨ **–ê–ù–ê–õ–ò–ó –í–ò–î–ï–û**
        
        üìã **–û–ë–©–ï–ï –û–ü–ò–°–ê–ù–ò–ï:**
        [–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –í–°–ï–ì–û —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –≤–∏–¥–µ–æ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞]
        
        ‚è∞ **–†–ê–°–ö–ê–î–†–û–í–ö–ê –ü–û –í–†–ï–ú–ï–ù–ò:**
        
        üïê **0:00-0:05** - [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–≥–æ]
        üïê **0:05-0:10** - [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–≥–æ]
        [–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–æ –ö–û–ù–¶–ê –≤–∏–¥–µ–æ...]
        
        üéØ **–ö–õ–Æ–ß–ï–í–´–ï –ú–û–ú–ï–ù–¢–´:**
        ‚Ä¢ [–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç 1]
        ‚Ä¢ [–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç 2]
        ‚Ä¢ [–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç 3]
        
        üìù **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:**
        [–û–±—â–∏–µ –≤—ã–≤–æ–¥—ã –æ –ü–û–õ–ù–û–ú –≤–∏–¥–µ–æ, –≤–∫–ª—é—á–∞—è —Ä–∞–∑–≤—è–∑–∫—É –∏ —Ñ–∏–Ω–∞–ª]
        """,
        'en': """
        Analyze what is happening in this video, I want to see a storyboard with what is happening over time.
        
        The response structure should be:
        üé¨ **VIDEO ANALYSIS**
        
        üìã **GENERAL DESCRIPTION:**
        [Brief description of video content]
        
        ‚è∞ **TIMELINE BREAKDOWN:**
        
        üïê **0:00-0:05** - [Description of what's happening]
        üïê **0:05-0:10** - [Description of what's happening]
        [and so on...]
        
        üéØ **KEY MOMENTS:**
        ‚Ä¢ [Important moment 1]
        ‚Ä¢ [Important moment 2]
        ‚Ä¢ [Important moment 3]
        
        üìù **CONCLUSION:**
        [General conclusions about the video]
        """,
        'es': """
        Analiza lo que est√° pasando en este video, quiero ver un gui√≥n gr√°fico con lo que est√° pasando a lo largo del tiempo.
        
        La estructura de respuesta debe ser:
        üé¨ **AN√ÅLISIS DE VIDEO**
        
        üìã **DESCRIPCI√ìN GENERAL:**
        [Breve descripci√≥n del contenido del video]
        
        ‚è∞ **DESGLOSE TEMPORAL:**
        
        üïê **0:00-0:05** - [Descripci√≥n de lo que est√° pasando]
        üïê **0:05-0:10** - [Descripci√≥n de lo que est√° pasando]
        [y as√≠ sucesivamente...]
        
        üéØ **MOMENTOS CLAVE:**
        ‚Ä¢ [Momento importante 1]
        ‚Ä¢ [Momento importante 2]
        ‚Ä¢ [Momento importante 3]
        
        üìù **CONCLUSI√ìN:**
        [Conclusiones generales sobre el video]
        """
    }
    
    GPT_SCRIPT_PROMPTS = {
        'ru': """
        –¢—ã –ø–æ–ª—É—á–∞–µ—à—å –æ–ø–∏—Å–∞–Ω–∏–µ –∏–ª–∏ —Ä–∞—Å–∫–∞–¥—Ä–æ–≤–∫—É –≤–∏–¥–µ–æ –æ —Å–ø–∞—Å–µ–Ω–∏–∏ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ.
        –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —ç—Ç–æ –≤ —Ü–µ–ª—å–Ω—ã–π —Ç—Ä–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—Å–∫–∞–∑, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –æ—Ç —Ç—Ä–µ—Ç—å–µ–≥–æ –ª–∏—Ü–∞, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤ —Å—Ç–∏–ª–µ —ç—Ç–∞–ª–æ–Ω–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞:

        "–ü–∞—Ä–µ–Ω—å –ø—Ä–∏—à—ë–ª –≤—ã–±—Ä–æ—Å–∏—Ç—å –º—É—Å–æ—Ä, –∞ –∑–∞–º–µ—Ç–∏–ª –Ω–∞ –±–∞–∫–µ –∏—Å—Ç–æ—â—ë–Ω–Ω–æ–≥–æ –∫–æ—Ç–∞. –û–Ω –±—ã–ª —è–≤–Ω–æ —É–ª–∏—á–Ω—ã–º –∏, –≤–∏–¥–∏–º–æ, –¥–∞–≤–Ω–æ –Ω–µ –µ–ª –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –µ–¥—ã. –û–Ω –±—ã–ª –Ω–∞—Å—Ç–æ–ª—å–∫–æ —Ö—É–¥—ã–º, —á—Ç–æ —Å–µ—Ä–¥—Ü–µ –ø–∞—Ä–Ω—è —Å–∂–∞–ª–æ—Å—å, –∏ –æ–Ω –ø—Ä–æ—Å—Ç–æ –Ω–µ –º–æ–≥ –Ω–∞ —ç—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –±–µ–∑ —Å–ª—ë–∑. –ö–æ—Ç –±—ã–ª —è–≤–Ω–æ –∫–æ–≥–¥–∞-—Ç–æ –¥–æ–º–∞—à–Ω–∏–º, –Ω–æ –ø—Ä–æ—à–ª—ã–µ —Ö–æ–∑—è–µ–≤–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–±—Ä–æ—Å–∏–ª–∏ –µ–≥–æ –Ω–∞ —É–ª–∏—Ü—É. –ö–æ—Ç –ø–µ—Ä–µ—Å—Ç–∞–ª –≤–µ—Ä–∏—Ç—å –ª—é–¥—è–º –∏ –Ω–µ —Å—Ä–∞–∑—É –¥–∞–ª—Å—è –≤ —Ä—É–∫–∏. –ï–≥–æ –ø—Ä–∏–º–∞–Ω–∏–ª–∏ –µ–¥–æ–π, –∏ –∫–æ—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –Ω–∞—á–∞–ª –∫–æ–Ω—Ç–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å. –ü–∞—Ä–µ–Ω—å –Ω–µ —Å–¥–∞–≤–∞–ª—Å—è –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–ª –¥–æ–±–∏–≤–∞—Ç—å—Å—è –µ–≥–æ –¥–æ–≤–µ—Ä–∏—è, –∏ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –µ–≥–æ —É–¥–∞–ª–æ—Å—å –ø–æ–π–º–∞—Ç—å, –ª—é–¥–∏ —Å—Ä–∞–∑—É –∂–µ –æ—Ç–Ω–µ—Å–ª–∏ –µ–≥–æ –≤ –≤–µ—Ç–∫–ª–∏–Ω–∏–∫—É. –ö–æ—Ç—É –ø—Ä–æ–≤–µ–ª–∏ –ø–æ–ª–Ω—ã–π –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –æ–∫–∞–∑–∞–ª–∏ –ø–µ—Ä–≤—É—é –ø–æ–º–æ—â—å. –í–ø–µ—Ä–µ–¥–∏ –±—ã–ª–æ –¥–æ–ª–≥–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –∏ –ø–∞—Ä–µ–Ω—å —Å—Ç–∞–Ω–µ—Ç –µ–≥–æ –æ–ø–µ–∫—É–Ω–æ–º. –ë–ª–∞–≥–æ–¥–∞—Ä—è —É—Å–∏–ª–∏—è–º –∏ –∑–∞–±–æ—Ç–µ –ª—é–¥–µ–π, –∫–æ—Ç –Ω–∞–±—Ä–∞–ª –≤–µ—Å –∏ —Å—Ç–∞–ª –¥–æ–≤–µ—Ä—è—Ç—å –ª—é–¥—è–º. –û–Ω —É–∂–µ –Ω–µ –±–æ—è–ª—Å—è –∏ –Ω–µ –≥–æ–ª–æ–¥–∞–ª. –ö–æ—Ç –∂–∏–ª –≤ —Ç—ë–ø–ª–æ–º –¥–æ–º–µ, –≥–¥–µ –µ–≥–æ –ª—é–±–∏–ª–∏ –∏ —É–≤–∞–∂–∞–ª–∏. –î–æ–±—Ä–æ—Ç–∞ –ª—é–¥–µ–π –ø–æ–¥–∞—Ä–∏–ª–∏ –µ–º—É –Ω–∞—Å—Ç–æ—è—â–∏–π —à–∞–Ω—Å –Ω–∞ –≤—Ç–æ—Ä—É—é –∂–∏–∑–Ω—å. –ö–æ—Ç–∞ –ø–æ–ª—é–±–∏–ª–∏ –≤—Å–µ–º —Å–µ—Ä–¥—Ü–µ–º –∏ –æ–±–µ—Å–ø–µ—á–∞—Ç –µ–º—É —Å–∞–º—É—é –ª—É—á—à—É—é –∂–∏–∑–Ω—å."

        üìú –ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏—è:

        –¢–æ–ª—å–∫–æ —Ç—Ä–µ—Ç—å–µ –ª–∏—Ü–æ.
        –ò—Å—Ç–æ—Ä–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∞ —Å—Ç—Ä–æ–≥–æ –æ—Ç —Ç—Ä–µ—Ç—å–µ–≥–æ –ª–∏—Ü–∞.
        –ù–∏–∫–∞–∫–∏—Ö "—è", "–º—ã", "–Ω–∞—à". –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
        ¬´–∂–µ–Ω—â–∏–Ω–∞ –∑–∞–º–µ—Ç–∏–ª–∞‚Ä¶¬ª
        ¬´–º—É–∂—á–∏–Ω–∞ –ø–æ–¥–æ—à—ë–ª‚Ä¶¬ª
        ¬´—Å–µ—Ä–¥—Ü–µ —Å–ø–∞—Å–∞—Ç–µ–ª—è —Å–∂–∞–ª–æ—Å—å‚Ä¶¬ª

        –ù–∞—á–∞–ª–æ ‚Äî —Å—Ä–∞–∑—É —Å –¥—Ä–∞–º—ã.
        –ü–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å—Ä–∞–∑—É —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
        –∫—Ç–æ –∑–∞–º–µ—Ç–∏–ª,
        –∫–æ–≥–æ –∑–∞–º–µ—Ç–∏–ª,
        —á—Ç–æ –∂–∏–≤–æ—Ç–Ω–æ–µ –±—ã–ª–æ –±—Ä–æ—à–µ–Ω–æ/–æ—Å—Ç–∞–≤–ª–µ–Ω–æ.
        –ü—Ä–∏–º–µ—Ä: ¬´–ñ–µ–Ω—â–∏–Ω–∞ –∑–∞–º–µ—Ç–∏–ª–∞ –Ω–∞ —Ö–æ–ª–æ–¥–Ω–æ–º –∞—Å—Ñ–∞–ª—å—Ç–µ –∫—Ä–æ—à–µ—á–Ω–æ–≥–æ –æ–ø–æ—Å—Å—É–º–∞, –∫–æ—Ç–æ—Ä–æ–≥–æ –º–∞—Ç—å –±—Ä–æ—Å–∏–ª–∞ –∏ —É—à–ª–∞ –ø—Ä–æ—á—å.¬ª

        –ü—Ä–∏—á–∏–Ω–∞ –±–µ–¥—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞.
        –í –Ω–∞—á–∞–ª–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π, –ø–æ—á–µ–º—É –∂–∏–≤–æ—Ç–Ω–æ–µ –æ–∫–∞–∑–∞–ª–æ—Å—å –≤ –±–µ–¥–µ (–±—Ä–æ—Å–∏–ª–∞ –º–∞—Ç—å, –≤—ã–±—Ä–æ—Å–∏–ª–∏, –ø–æ—Ç–µ—Ä—è–ª–æ—Å—å).

        –î–æ–±–∞–≤—å –¥–µ—Ç–∞–ª–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞.
        –í –ø–µ—Ä–≤—ã—Ö –∞–±–∑–∞—Ü–∞—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–ø–æ–º—è–Ω–∏ –ø—Ä–∏–∑–Ω–∞–∫–∏ —Å—Ç—Ä–∞–¥–∞–Ω–∏—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ (–¥—Ä–æ–∂—å, —Ö—É–¥–æ–±–∞, –≥—Ä—è–∑—å, —à–µ—Ä—Å—Ç—å –≤—ã–ø–∞–¥–∞–µ—Ç, –≤–æ—Å–ø–∞–ª—ë–Ω–Ω—ã–µ –≥–ª–∞–∑–∞ –∏ —Ç. –¥.). –≠—Ç–æ —É—Å–∏–ª–∏–≤–∞–µ—Ç –¥—Ä–∞–º—É.

        –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑ 5 —ç—Ç–∞–ø–æ–≤:
        –ù–∞—á–∞–ª–æ: –±–µ–¥–∞ + –ø—Ä–∏—á–∏–Ω–∞ + –¥–µ—Ç–∞–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
        –ö–æ–Ω—Ñ–ª–∏–∫—Ç: –Ω–µ–¥–æ–≤–µ—Ä–∏–µ, —Å—Ç—Ä–∞—Ö, –æ—Ç–∫–∞–∑ –∏–¥—Ç–∏ –Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç.
        –ü–æ–≤–æ—Ä–æ—Ç: –ø–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç –∏ –∑–∞–±–æ—Ç–∞ (–∫–æ—Ä–º–ª–µ–Ω–∏–µ, –ª–µ—á–µ–Ω–∏–µ, –ª–∞—Å–∫–∞).
        –†–∞–∑–≤–∏—Ç–∏–µ: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—å—è, —Ä–æ—Å—Ç –¥–æ–≤–µ—Ä–∏—è, –¥—Ä—É–∂–±–∞ —Å –ª—é–¥—å–º–∏.
        –§–∏–Ω–∞–ª: –∫–æ–Ω—Ç—Ä–∞—Å—Ç —Å –Ω–∞—á–∞–ª–æ–º ‚Äî –Ω–∞–ø–æ–º–Ω–∏, –∫–∞–∫–∏–º –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–º –æ–Ω–æ –±—ã–ª–æ, –∏ –ø–æ–∫–∞–∂–∏, –∫–∞–∫ –æ–Ω–æ —Ç–µ–ø–µ—Ä—å –æ–∫—Ä—É–∂–µ–Ω–æ –ª—é–±–æ–≤—å—é.

        –§–∏–Ω–∞–ª –≤—Å–µ–≥–¥–∞ —Ç—ë–ø–ª—ã–π –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π.
        –û–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å —Å–ª—ë–∑—ã —Ä–∞–¥–æ—Å—Ç–∏ –∏ –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞—Ç—å: ¬´–ë–æ–ª—å—à–µ –µ–≥–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—Ä–æ—Å—è—Ç¬ª.

        –°—Ç–∏–ª—å: –ø—Ä–æ—Å—Ç–∞—è, –∂–∏–≤–∞—è –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ—á—å. –û–±—Ä–∞–∑—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∏–ª—å–Ω—ã–º–∏:
        ¬´—Ç–µ–Ω—å —Å–∞–º–æ–≥–æ —Å–µ–±—è¬ª
        ¬´–∏—Å–∫—Ä—ã –∂–∏–∑–Ω–∏ –≤ –≥–ª–∞–∑–∞—Ö¬ª
        ¬´—Å–µ—Ä–¥—Ü–µ —Å–∂–∞–ª–æ—Å—å¬ª

        –î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞: –ø—Ä–∏–º–µ—Ä–Ω–æ {character_count} —Å–∏–º–≤–æ–ª–æ–≤ (700‚Äì900).

        ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –°–ê–ú–û–ü–†–û–í–ï–†–ö–ê

        –ü–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º —Å—Ä–∞–≤–Ω–∏ —Å–≤–æ–π —Ç–µ–∫—Å—Ç —Å —ç—Ç–∞–ª–æ–Ω–æ–º:

        ‚úÖ –ü–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç ¬´–∫—Ç–æ –∑–∞–º–µ—Ç–∏–ª¬ª, ¬´–∫–æ–≥–æ –∑–∞–º–µ—Ç–∏–ª¬ª –∏ ¬´–ø–æ—á–µ–º—É –æ–Ω –æ–¥–∏–Ω¬ª?
        ‚úÖ –ï—Å—Ç—å –ª–∏ –æ–ø–∏—Å–∞–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –∏ —Å—Ç—Ä–∞–¥–∞–Ω–∏–π –∂–∏–≤–æ—Ç–Ω–æ–≥–æ –≤ –Ω–∞—á–∞–ª–µ?
        ‚úÖ –ï—Å—Ç—å –ª–∏ –≤—Å–µ 5 —ç—Ç–∞–ø–æ–≤ (–±–µ–¥—Å—Ç–≤–∏–µ ‚Üí –∫–æ–Ω—Ñ–ª–∏–∫—Ç ‚Üí –ø–æ–≤–æ—Ä–æ—Ç ‚Üí –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Üí —Ñ–∏–Ω–∞–ª)?
        ‚úÖ –ï—Å—Ç—å –ª–∏ –¥—Ä–∞–º–∞ –¥–æ–≤–µ—Ä–∏—è?
        ‚úÖ –î–ª–∏–Ω–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ {character_count}?
        ‚úÖ –§–∏–Ω–∞–ª —Ç—ë–ø–ª—ã–π, –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–π (—Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –æ –Ω–∞—á–∞–ª–µ)?
        ‚úÖ –†–∞—Å—Å–∫–∞–∑ –Ω–∞–ø–∏—Å–∞–Ω —Å—Ç—Ä–æ–≥–æ –æ—Ç —Ç—Ä–µ—Ç—å–µ–≥–æ –ª–∏—Ü–∞?

        –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—É–Ω–∫—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω ‚Üí –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å!

        –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ):
        {video_description}

        üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

        üéôÔ∏è **–°–¶–ï–ù–ê–†–ò–ô –î–õ–Ø –û–ó–í–£–ß–ö–ò:**
        [–¶–µ–ª—å–Ω—ã–π —Ä–∞—Å—Å–∫–∞–∑ –Ω–∞ {character_count} —Å–∏–º–≤–æ–ª–æ–≤]

        üì∫ **–í–ê–†–ò–ê–ù–¢–´ –ó–ê–ì–û–õ–û–í–ö–û–í:**
        1. [–ó–∞–≥–æ–ª–æ–≤–æ–∫ 1]
        2. [–ó–∞–≥–æ–ª–æ–≤–æ–∫ 2]
        3. [–ó–∞–≥–æ–ª–æ–≤–æ–∫ 3]

        üîë **–ö–õ–Æ–ß–ï–í–´–ï –°–õ–û–í–ê:**
        1. [–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ 1]
        2. [–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ 2]
        3. [–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ 3]
        """,
        'en': """
        You receive a description or storyboard of a video about animal rescue.
        Your task is to turn this into a cohesive touching story, written in third person, in the style of this reference example:

        "A guy came to throw out trash and noticed an exhausted cat on the dumpster. It was clearly a street cat and apparently hadn't eaten proper food for a long time. It was so thin that the guy's heart sank, and he just couldn't look at it without tears. The cat was clearly once domestic, but previous owners simply threw it out on the street. The cat stopped trusting people and didn't immediately let itself be caught. They lured it with food, and the cat gradually began to make contact. The guy didn't give up and continued to earn its trust, and as soon as they managed to catch it, people immediately took it to the vet clinic. The cat underwent a full examination and received first aid. There was a long recovery ahead, and the guy would become its guardian. Thanks to people's efforts and care, the cat gained weight and began to trust people. It was no longer afraid and hungry. The cat lived in a warm home where it was loved and respected. People's kindness gave it a real chance for a second life. The cat was loved with all their hearts and they would provide it with the best life."

        üìú Writing Rules:

        Third person only.
        The story must be written strictly in third person.
        No "I", "we", "our". Use only constructions like:
        "the woman noticed..."
        "the man approached..."
        "the rescuer's heart sank..."

        Beginning ‚Äî immediately with drama.
        The first sentence should immediately contain:
        who noticed,
        whom they noticed,
        that the animal was abandoned/left behind.
        Example: "A woman noticed a tiny opossum on the cold asphalt that its mother had abandoned and left behind."

        Reason for the trouble is mandatory.
        At the beginning of the story, always indicate why the animal ended up in trouble (mother abandoned it, was thrown out, got lost).

        Add details of appearance.
        In the first paragraphs, be sure to mention signs of the animal's suffering (trembling, thinness, dirt, fur falling out, inflamed eyes, etc.). This enhances the drama.

        5-stage structure:
        Beginning: trouble + reason + condition details.
        Conflict: distrust, fear, refusal to make contact.
        Turning point: first contact and care (feeding, treatment, affection).
        Development: health recovery, growing trust, friendship with people.
        Ending: contrast with the beginning ‚Äî remind how miserable it was, and show how it's now surrounded by love.

        Ending is always warm and inspiring.
        It should bring tears of joy and emphasize: "It will never be abandoned again."

        Style: simple, lively and emotional speech. Images should be strong:
        "shadow of itself"
        "sparks of life in the eyes"
        "heart sank"

        Text length: approximately {character_count} characters (700‚Äì900).

        ‚ö†Ô∏è MANDATORY SELF-CHECK

        Before responding, compare your text with the reference:

        ‚úÖ Does the first sentence contain "who noticed", "whom they noticed" and "why it's alone"?
        ‚úÖ Are there descriptions of appearance and animal suffering at the beginning?
        ‚úÖ Are all 5 stages present (disaster ‚Üí conflict ‚Üí turning point ‚Üí recovery ‚Üí ending)?
        ‚úÖ Is there trust drama?
        ‚úÖ Is the length within {character_count} range?
        ‚úÖ Is the ending warm, contrasting and inspiring (with mandatory reminder of the beginning)?
        ‚úÖ Is the story written strictly in third person?

        If at least one point is not fulfilled ‚Üí rewrite!

        Input data (video description):
        {video_description}

        üì¶ Response Structure

        üéôÔ∏è **VOICE-OVER SCRIPT:**
        [Complete story of {character_count} characters]

        üì∫ **TITLE OPTIONS:**
        1. [Title 1]
        2. [Title 2]
        3. [Title 3]

        üîë **KEYWORDS:**
        1. [Keyword 1]
        2. [Keyword 2]
        3. [Keyword 3]
        """,
        'es': """
        Recibes una descripci√≥n o gui√≥n gr√°fico de un video sobre rescate de animales. 
        Tu tarea es convertir esto en una historia conmovedora y cohesiva, escrita en tercera persona, 
        en el estilo de este ejemplo de referencia:

        "El chico not√≥ en el concreto fr√≠o un gato que parec√≠a la sombra de s√≠ mismo. 
        Estaba delgado hasta los huesos, el pelaje se ca√≠a en mechones, la piel estaba inflamada, y los ojos llenos de dolor y fatiga. 
        El coraz√≥n del chico se encogi√≥, y no pudo contener las l√°grimas. Era evidente que una vez el gato fue dom√©stico, 
        pero la gente simplemente lo desech√≥, dej√°ndolo solo con la enfermedad y la calle.
        ... (y as√≠ hasta un final c√°lido)"

        Reglas de escritura:
        1. Historia en tercera persona.
        2. Discurso simple, vivo y emocional.
        3. Longitud del texto: aproximadamente {character_count} caracteres.
        4. Estructura:
           - Inicio: descripci√≥n del estado severo del animal + primeras emociones del rescatista.
           - Conflicto: el animal no conf√≠a en las personas, requiere paciencia.
           - Punto de giro: primer contacto e inicio del tratamiento.
           - Desarrollo: recuperaci√≥n gradual y crecimiento de la confianza.
           - Final: hogar feliz, amor, promesa de una vida mejor.
        5. Enf√≥cate en los sentimientos del rescatista y el drama de la confianza.
        6. El final debe ser c√°lido, "que arranque l√°grimas" e inspirador.
        7. No renarres el video cuadro por cuadro, sino escribe como una historia completa del destino.
        8. Usa im√°genes emocionales ("coraz√≥n se encogi√≥", "chispas de vida en los ojos", "sombra de s√≠ mismo").
        
        ‚ö†Ô∏è **AUTOVERIFICACI√ìN OBLIGATORIA ANTES DE RESPONDER:**
        
        ANTES de dar tu respuesta final, compara tu gui√≥n con el ejemplo de referencia:
        
        ‚úÖ Verifica estilo: ¬øtu texto usa im√°genes emocionales como en la referencia?
        ‚úÖ Verifica estructura: ¬øest√°n presentes las 5 etapas (condici√≥n ‚Üí conflicto ‚Üí punto de giro ‚Üí desarrollo ‚Üí final)?
        ‚úÖ Verifica emociones: ¬øel texto transmite los sentimientos del rescatista y el drama de confianza?
        ‚úÖ Verifica longitud: ¬øcoincide aproximadamente con {character_count} caracteres?
        ‚úÖ Verifica final: ¬øes c√°lido, inspirador y "que arranque l√°grimas"?
        ‚úÖ Verifica narrativa: ¬øes una historia completa del destino, no una renarraci√≥n cuadro por cuadro?
        
        ¬°SI al menos un punto NO coincide con la referencia - reescribe hasta cumplimiento completo!
        Responde SOLO cuando el gui√≥n est√© lo m√°s cerca posible del estilo del ejemplo de referencia.
        
        Datos de entrada (descripci√≥n del video):
        {video_description}
        
        Tambi√©n dame por separado:
        1. Tres opciones de t√≠tulo que deben ser provocativos, evocar curiosidad y el deseo de ver el video hasta el final.
        2. Elige 3 palabras clave basadas en lo que sucede en el video - deben coincidir exactamente con el tema del video y no ser vagas o generales en significado.
        
        Estructura de respuesta:
        
        üéôÔ∏è **GUI√ìN DE NARRACI√ìN:**
        [Gui√≥n de historia para narraci√≥n, aproximadamente {character_count} caracteres]
        
        üì∫ **OPCIONES DE T√çTULO:**
        1. [T√≠tulo 1]
        2. [T√≠tulo 2] 
        3. [T√≠tulo 3]
        
        üîë **PALABRAS CLAVE:**
        1. [Palabra clave 1]
        2. [Palabra clave 2]
        3. [Palabra clave 3]
        """
    }
    
    @classmethod
    def get_video_analysis_prompt(cls, language='ru'):
        """Get video analysis prompt for specified language."""
        return cls.VIDEO_ANALYSIS_PROMPTS.get(language, cls.VIDEO_ANALYSIS_PROMPTS[cls.DEFAULT_LANGUAGE])
    
    @classmethod
    def get_gpt_script_prompt(cls, language='ru'):
        """Get GPT script prompt for specified language."""
        return cls.GPT_SCRIPT_PROMPTS.get(language, cls.GPT_SCRIPT_PROMPTS[cls.DEFAULT_LANGUAGE])
    
    @classmethod
    def get_language_config(cls, language='ru'):
        """Get language configuration."""
        return cls.SUPPORTED_LANGUAGES.get(language, cls.SUPPORTED_LANGUAGES[cls.DEFAULT_LANGUAGE])
    
    @classmethod
    def validate_config(cls) -> bool:
        """Validate required configuration parameters."""
        required_vars = [
            'TELEGRAM_BOT_TOKEN',
            'GEMINI_API_KEY',
            'ELEVENLABS_API_KEY'
        ]
        
        missing_vars = []
        for var in required_vars:
            if not getattr(cls, var):
                missing_vars.append(var)
        
        if missing_vars:
            print(f"Missing required environment variables: {', '.join(missing_vars)}")
            print("Please check your .env file")
            return False
        
        return True
